<h1 align="center"><img src="logo.png" alt="tmesca" width="800"/></h1>

[README on English](README.md)

## Что это?
**tmesca** - это сканер публичных сущностей Telegram через парсинг содержимого коротких ссылок на `t.me`. Принцип крайне прост:
1. Генерируем ссылку на `t.me`
2. Выкачиваем её содержимое
3. Анализируем и определяем, что оно из себя представляет (пользователя/канал/стикеры и т.д.)
4. Сохраняем информацию в нужную базу данных на основании типа сущности

Поэтому **tmesca** не требует аккаунта в Telegram и не зависит от Telegram API.

## Основные функции

1. Различные виды генерации ссылок:
    * Линейный поиск - генерирует все ссылки с определённой длиной. Другими словами, брутфорс.
    * Случайный поиск - генерирует случайные ссылки длинной от 5 до 32 символов.
    <!-- * Поиск с мутацией - ввести слово, скрипт создаёт все возможные мутации этого слова и проверяет их. -->
2. Типы контента для парсинга:
    * Каналы
    * Группы
    * Пользователи
    * Стикерпаки
    * Боты
3. Вывод в Telegram
4. Турбо-режим - может быть включен чтобы ускорить парсинг. 

## Ограничения
`t.me` позволяет только 300 запросов в минуту с одного адреса.

## Установка и запуск
Вам потребуется git, python3 и pip, а для второго способа ещё pipenv.

### Чистый python
Этот способ рекомендуется для новичков. Просто выполните эти команды в терминале.
```bash
git clone https://github.com/Antcating/tmesca.git
cd tmesca/
pip install -r requirements.txt
python3 -m tmesca
```

### pipenv
Способ для продвинутых. Этот способ предполагает, что вы знаете что делаете.
```bash
git clone https://github.com/Antcating/tmesca.git
cd tmesca/
pipenv install
pipenv run tmesca
```

## Конфигурация
**tmesca** не требует никакой конфигурации по умолчанию и запросит все необходимые настройки при запуске. Однако, для постоянных запусков может быть удобнее скофигурировать под себя. Для базовой конфигурации достаточно скопировать файл `tmesca.example.yml` в `tmesca.yml`. Детальное описание всех полей вы можете найти в том же файле. 

### Разница между `soup` и `lighting`
Парсер `soup` работает поверх Beautiful Soup и lxml, а парсер `lighting` использует простые сравнения строк. Соответственно `soup` работает точнее, но `lighting` быстрее на ~30%. Рекомендуется использовать `lighting` с режимом `link`, а `soup` с режимом `full`. 

## Вывод в Telegram 
Для вывода Telegram вам необходимо проделать следующие шаги:  
- Создайте бота Telegram с помощью [BotFather](https://t.me/BotFather) и получите Bot Token Telegram.  
- Получите id своей страницы в Telegram. Можно сделать с помощью [этого бота](https://t.me/userinfobot).
- Создайте конфиг, если ещё нет. Можете закомментировать всё не нужное.
- В конфиге вставьте Bot Token Telegram, полученный ранее в строку `bot_token`, а id в строку `user_id`. 
- Ура! Все готово. Развлекайтесь!

### Зависимости и благодарности
* [Beautiful Soup 4](https://www.crummy.com/software/BeautifulSoup/)
* [Requests](https://docs.python-requests.org/en/master/)
* [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI)

Отдельная благодарность [@flexagoon](https://t.me/flexagoon) за перевод README.md на русский язык.
